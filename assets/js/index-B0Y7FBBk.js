import{r as c,V as L,X as f,j as t,Y as v,Z as $}from"./vendor-WoSn31sX.js";const B=["image/png","image/jpeg"];function O({setValue:n,value:o="",limit:a=1,fileSize:u=5,fileType:i=B,disabled:x,multiple:d=!1,listType:y="picture-card",children:j,className:F,onChange:b}){const l=c.useRef(!0),p=c.useMemo(()=>o.split(",").filter(Boolean).map(e=>({url:e,uid:L(),name:e})),[o]),k=c.useCallback((e,s)=>{if(d){if(s[0].uid===e.uid){const r=o.split(",").filter(Boolean);if(s.length>a-r.length)return f.error(`超出最大上次数量，最多上传 ${a-r.length} 个文件!`),l.current=!1,!1;const m=s.filter(h=>!(!i.includes(h.type)||!(h.size/1024/1024<u))),g=s.length-m.length;if(g>0)return f.error(`${g} 个文件未通过校验`),l.current=!1,!1;l.current=!0}return l.current}else return i.includes(e.type)?e.size/1024/1024<u?!0:(f.error(`上传文件大小不能超过 ${u} MB!`),!1):(f.error(`文件格式不正确, 请上传${i.join("/")}格式文件!`),!1)},[d,u,i,a,o]),U=({file:e})=>{n&&n(s=>s+",https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png")},R=e=>{const s=p.filter(r=>r.uid!==e.uid).map(r=>r.url);n&&n(s.join(","))};return t.jsx(t.Fragment,{children:t.jsx(v,{className:F,listType:y,disabled:x,maxCount:a,multiple:d,fileList:p,beforeUpload:k,customRequest:U,onRemove:R,onChange:b,children:p.length>=a?null:j||t.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[t.jsx($,{}),t.jsx("div",{className:"mt-2",children:"Upload"})]})})})}const E=c.memo(O);function I(){const[n,o]=c.useState("https://fuss10.elemecdn.com/a/3f/3302e58f9a181d2509f3dc0fa68b0jpeg.jpeg");return t.jsx(t.Fragment,{children:t.jsx(E,{setValue:o,value:n,limit:2})})}export{I as default};
